<html> 
  <head> 
    <title>Natural Language Processing</title> 
    <link rel=stylesheet 
     href="http://www.cs.utexas.edu/users/nn/nn.css"
     type="text/css">  
  </head> 
  <body> 
  <h1>Natural Language Processing<br> 
        (due 11:59 pm, Nov 5, 2012)</h1> 
 
<P> 

In this exercise, we will expand the simple parser provided with OpenNERO to handle more complex commands.  The parser will use semantic grammar (See <a href="semanticgrammar.pdf">Figure 15.10, 15.11</a>). <a href="semanticgrammar.pdf">Semantic grammar</a> is a rule based system that allows the flexibility to combine the syntactic and semantic concepts to parse natural language sentences into executable actions. We will be solving the BlocksTower mod (previously used in HW2) through natural language inputs from the user.  The idea is to convert simple English language sentences into actions which can be executed by OpenNERO.   
<P>
The MyDialog class in text_interface.py handles the input and parsing.  This is the file you should be editing, starting with the <tt>semantic_parser</tt> and <tt>get_noun_phrases</tt> methods and adding any additional ones that you need.
<P>
You should work with a partner on this assignment.  Solo submissions will not be accepted without prior approval.
	

<H2>Get a Fresh Version of OpenNERO</H2> 
<p>The following steps should help get you up and running in OpenNERO:

<ol>
  <li>Install it on your own machine(or one of the <a href="http://www.cs.utexas.edu/facilities/public-labs">public lab machines</a>) by downloading one of the <a href="http://code.google.com/p/opennero/downloads/list">prebuilt binaries</a></li>
  <li><a href="http://code.google.com/p/opennero/wiki/BuildingOpenNero">Build OpenNERO</a> on your own machine using the source code.</li>
</ol>
Next you need to <a href="hw4_nlp_files.zip">download the modified BlocksTower files </a> for this assignment into the BlocksTower mod folder. The following files are included in the zipped file - <tt>agent.py</tt> and <tt>text_interface.py</tt>. You should make sure that these files overwrite the existing files with the same name in BlocksTower folder.  If you modified <tt>agent.py</tt> as part of Homework 2 and want to keep you changes for later reference back up your <tt>agent.py</tt> file.


<H2>BlocksTower Text Interface</H2>
Once you have downloaded the new files, run OpenNERO and start the Goal-stack planner in the BlocksTower mod. A pop-up dialog box will open up which will take text input. For a start, enter the following commands in the dialog box and see how the agent respond.</b> 

<pre>
Move Disk1 from Pole1 to pole3
Pick up Disk1 lying on Pole1
Put Disk1 on Pole2
</pre>

The current parser can only handle three possible types of English language sentences and the actions corresponding to each of them. 

<pre>
<TABLE border="1"
<TR><TH>English sentences<TH>OpenNERO command
<TR><TD>Move Disk1 from Pole1 to Pole2<TD>Mov Disk1 Pole1 Pole2
<TR><TD>Pick up Disk1 from Pole1<TD>Pick Disk1 Pole1
<TR><TD>Put down Disk1 on Pole2<TD>Put Disk1 Pole2
</TABLE>
</pre>

Similarly, variants of the above sentences/commands can be made by using Disk1/Disk2/Disk3 and Pole1/Pole2/Pole3.
The command format is always -

<pre>
S -> VP1 NP1 NP3 NP4 | VP2 NP1 NP3 | VP3 NP1 NP4
VP1 -> move 
VP2 -> pick up 
VP3 -> put
NP1 -> disk1 | disk2 | disk3
NP2 -> pole1 | pole2 | pole3
NP3 -> from NP2
NP4 -> to NP2 | on NP2
</pre>

The current parser will currently accept many commands that do not follow the above grammer, as long as they still begin with VP1, VP2 or VP3.  The simulator, however, will only execute legal commands. For example, if Disk1 is lying on Pole1, then you cannot pick it from Pole2 or, if Disk1 is lying on Disk2, then you cannot move Disk2. Remember, the starting configuration of 3-disk planner includes Disk3 lying on Pole1, Disk2 lying on Disk3 and Disk1 lying on Disk2. 



<h2>Natural Language and Corresponding Actions</h2>
<h2>Problem Statement</h2>


Your assignment is to improve the parser to handle more complex grammar.  Specifically, your parser should be able to handle any combination of the following:
<pre>
<B>S -> S and S</B>
S -> VP1 NP1 NP3 NP4 | <B>VP1 NP1 NP4 NP3</B> | VP2 NP1 NP3 | VP3 NP1 NP4
VP1 -> move 
VP2 -> pick up 
VP3 -> put
NP1 -> disk1 | disk2 | disk3
NP2 -> pole1 | pole2 | pole3 <B>| ADJ pole</B>
NP3 -> from NP2
NP4 -> to NP2 | on NP2
<B>ADJ  -> left | middle | right </B>
</pre>

The items in bold represent the following additional capibilities:
<ol>
	<li>Compound commands: ([Verb Phrase] [Noun Phrases] and [Verb Phrase] [Noun Phrases]) </li>
	<li>The noun phrases should be able to be in any order that still makes a proper english sentence.</li>
	<li>Recognize adjectives to describing the poles, in addition to the proper names ("Pole1", "Pole2" and "Pole3): ("left", "middle" and "right")</li>
</ol>

The following are some examples of these types of sentences:
<pre>
"Pick up Disk1 from Pole1 and Put Disk1 on Pole3" (compound sentences)
"Move Disk1 from Left Pole to Middle Pole" (adjectives)
"Move Disk1 to Pole3 from Pole1" (reordering)
</pre> 

Your parser should take the English language input from the user dialog box, parse it and convert it into OpenNERO the commands mentioned in the table below. The parser should be on the lines of the <a href="semanticgrammar.pdf">Semantic Parser</a>, but you are free to define the rules of your own choice.

<pre>
<TABLE border="1"
<TR><TH>OpenNERO command
<TR><TD>Mov Disk1 Pole1 Pole2
<TR><TD>Pick Disk1 Pole1
<TR><TD>Put Disk1 Pole2
</TABLE>
</pre>

Some commands will still be beyond your parser's capabilities, and some sommands are simply incomplete.  This is fine, however you should recognize that your parser has failed and output an appropriate error.  The following are examples of commands that should be rejected by your parser (hint: this can easily be a byproduct of not finding a correct command, there is no need to do seperate, detailed error checking):

<pre>
"Move Disk1 from Pole1" (No destination for move)
"Move Disk1 to Pole2" (No source)
"Pick up from Pole2" (No disk specified)
"Get Disk1 from Pole1 and move it to the right pole" (Does not begin with an recognized verb phrase)
</pre>

The MyDialog class in text_interface.py provides an interface with which to prove feedback about commands.  Examples of the use of this interface are provided in the existing parser implementation.  Note that there are both "INFO" and "ERROR" messages.  

There is no need to check for "impossible" commands, meaning those that are legal commands but cannot be performed in the current state.  Such a command will simply not be complied with.


<h2>Debugging</h2>
If you run into any bugs in your program, you can find the error log file for OpenNERO at one of the following locations:

<ul>
<li><b>Linux or Mac:</b> <tt>~/.opennero/nero_log.txt</tt></li>
<li><b>Windows:</b> <tt>"AppData\Local\OpenNERO\nero_log.txt"</tt> or <tt>"Local Settings\Application Data\OpenNERO\nero_log.txt"</tt> depending on the version of Windows you have.</li>
</ul>

<H2>Turning in your work</H2>
Turn in your report and all the files that you have modified electronically using <A HREF="http://www.cs.utexas.edu/users/risto/cs343/turnin.html"><TT>turnin</TT></A> (grader: <tt>houck</tt>, homework: <tt>cs343-hw4</tt>). In your report, include any special instructions needed to run your agent, as well as a brief description of how your agent parses the commands. As mentioned before, it may be easiest to just "tar" the directory and submit the tar-file to <TT>turnin</TT>, especially if you have more than 2 files.
 
</body> 
</html> 
